---
import type { ImageMetadata } from "astro";
import { Image } from "astro:assets";
import Tag from "./Tag.astro";
interface Props {
	imagePath: string;
	altText: string;
	title: string;
	tags: string[];
	description: string;
}

const { imagePath, altText = "", title = "", tags = [], description = "" } = Astro.props;
const images = import.meta.glob<{ default: ImageMetadata }>(
	"/src/assets/projects/*.{jpeg,jpg,png,gif}"
);
if (!images[imagePath])
	throw new Error(`"${imagePath}" does not exist in glob: "src/assets/*.{jpeg,jpg,png,gif}"`);
---

<div
	class="group relative m-0 -mx-5 cursor-pointer rounded-md border-t border-transparent object-cover px-5 py-4 transition-all hover:border-slate-500 hover:bg-slate-800/80"
>
	<div class="overflow-hidden rounded-md">
		<Image
			src={images[imagePath]()}
			alt={altText}
			class="w-full transition-all duration-150 group-hover:scale-105 group-hover:opacity-20"
		/>
	</div>
	<div
		class="absolute inset-x-5 inset-y-4 text-amber-400 opacity-0 transition-opacity duration-300 group-hover:opacity-100"
	>
		<div class="flex h-full items-center justify-center">
			<p class="px-2 text-center">
				<!-- Add a description prop to the component -->
				{description}
			</p>
		</div>
	</div>
	<div class="pt-4">
		<h2 class="text-lg font-semibold text-slate-200 transition-all group-hover:text-amber-400">
			{title}
		</h2>
	</div>
	<div class="pt-2">
		<!-- For all tags, create new array of tags of the element -->
		{tags.map((tag) => <Tag name={tag} />)}
	</div>
</div>
