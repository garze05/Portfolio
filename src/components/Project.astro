---
import type { ImageMetadata } from "astro";
import { Image } from "astro:assets";
import Tag from "./Tag.astro";
interface Props {
	imagePath: string;
	altText: string;
	title: string;
	tags: string[];
}

const { imagePath, altText = "", title = "", tags = [] } = Astro.props;
const images = import.meta.glob<{ default: ImageMetadata }>(
	"/src/assets/projects/*.{jpeg,jpg,png,gif}"
);
if (!images[imagePath])
	throw new Error(`"${imagePath}" does not exist in glob: "src/assets/*.{jpeg,jpg,png,gif}"`);
---

<div class="relative">
	<div class="relative cursor-pointer">
		<Image src={images[imagePath]()} alt={altText} />
		<div
			class="absolute inset-0 bg-black opacity-0 transition-all duration-200 hover:opacity-50"
		>
		</div>
		<h2
			class="absolute bottom-0 left-0 w-full bg-gray-800 px-2 text-2xl font-semibold text-white uppercase"
		>
			{title}
		</h2>
	</div>
	<div class="pt-2">
		<!-- For all tags, create new array of tags of the element -->
		{tags.map((tag) => <Tag name={tag} />)}
	</div>
</div>
