---
import Tech from "./Tech.astro";

// Define the tech stack with categories
const technologies = [
	// Frontend
	{ name: "React", icon: "react", category: "Frontend", color: "#61DAFB" },
	{
		name: "TypeScript",
		icon: "typescript",
		category: "Frontend",
		color: "#3178C6",
	},
	{
		name: "JavaScript",
		icon: "javascript",
		category: "Frontend",
		color: "#F7DF1E",
	},
	{ name: "HTML5", icon: "html5", category: "Frontend", color: "#E34F26" },
	{ name: "CSS3", icon: "css", category: "Frontend", color: "#663399" },
	{
		name: "Tailwind CSS",
		icon: "tailwindcss",
		category: "Frontend",
		color: "#06B6D4",
	},
	{
		name: "Bootstrap",
		icon: "bootstrap",
		category: "Frontend",
		color: "#7952B3",
	},
	{ name: "Astro", icon: "astro", category: "Frontend", color: "#BC52EE" },
	{ name: "Redux", icon: "redux", category: "Frontend", color: "#764ABC" },

	// Backend
	{ name: "Node.js", icon: "nodedotjs", category: "Backend", color: "#5FA04E" },
	{ name: "Express", icon: "express", category: "Backend", color: "#000000" },
	{ name: ".NET", icon: "dotnet", category: "Backend", color: "#512BD4" },
	{ name: "Python", icon: "python", category: "Backend", color: "#3776AB" },

	// Database
	{ name: "MongoDB", icon: "mongodb", category: "Database", color: "#47A248" },
	{
		name: "PostgreSQL",
		icon: "postgresql",
		category: "Database",
		color: "#4169E1",
	},
	{ name: "MySQL", icon: "mysql", category: "Database", color: "#4479A1" },
	{
		name: "SQL Server",
		icon: "sqlserver",
		category: "Database",
		color: "#a91d22",
	},

	// Tools
	{ name: "Git", icon: "git", category: "Tools", color: "#F05032" },
	{ name: "Github", icon: "github", category: "Tools", color: "#181717" },
	{ name: "Firebase", icon: "firebase", category: "Tools", color: "#DD2C00" },
];

const categories = ["All", "Frontend", "Backend", "Database", "Tools"];
---

<section class="tech-stack animate-blurred-fade-in">
	<h2 class="text-2xl font-bold mb-6 text-slate-100">Tech Stack</h2>

	<!-- Category Filter -->
	<div class="category-filters mb-6">
		<div class="flex flex-wrap gap-2">
			{
				categories.map((category) => (
					<button
						class="filter-btn px-3 py-1.5 text-sm rounded-full border border-slate-600 text-slate-300 hover:bg-slate-700 hover:text-white transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-slate-500"
						data-filter={category.toLowerCase()}
					>
						{category}
					</button>
				))
			}
		</div>
	</div>

	<!-- Tech Grid -->
	<div
		id="tech-grid"
		class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-4"
	>
		{
			technologies.map((tech) => (
				<Tech
					name={tech.name}
					icon={tech.icon}
					category={tech.category}
					color={tech.color}
				/>
			))
		}
	</div>
</section>

<script>
	// Filter functionality
	const filterButtons = document.querySelectorAll(".filter-btn");
	const techItems = document.querySelectorAll(".tech-item");

	// Set initial active state
	if (filterButtons[0]) {
		filterButtons[0].classList.add("active");
	}

	filterButtons.forEach((button) => {
		button.addEventListener("click", () => {
			const filter = button.getAttribute("data-filter");

			// Update active button
			filterButtons.forEach((btn) => btn.classList.remove("active"));
			button.classList.add("active");

			// Filter tech items
			techItems.forEach((item) => {
				const htmlItem = item as HTMLElement;
				const itemCategory = item.getAttribute("data-category");

				if (
					filter === "all" ||
					(itemCategory && itemCategory.toLowerCase() === filter)
				) {
					htmlItem.style.display = "flex";
          htmlItem.classList.add("animate-blurred-fade-in");
				} else {
					htmlItem.style.display = "none";
				}
			});
		});
	});
</script>

<style>
	.filter-btn.active {
		background-color: var(--bg-slate-600);
		color: var(--text-white);
		border-color: var(--border-slate-500);
	}
</style>
